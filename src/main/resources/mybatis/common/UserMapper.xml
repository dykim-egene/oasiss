<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oasis.common.mapper.UserMapper">
	<select id="getUser" resultType="com.oasis.common.vo.UserVo"> SELECT * from cmm_user </select>
	<select id="getUserById" parameterType="map"
		resultType="com.oasis.common.vo.UserVo"> SELECT * from cmm_user where user_id = #{id}</select>
	<select id="selectUserById" parameterType="map"
		resultType="com.oasis.common.vo.UserVo">
       <![CDATA[
           SELECT
               user_email email, user_auth auth, user_name name
           FROM
               cmm_user
           WHERE
               user_email=#{ loginId}
       ]]>
	</select>

	<update id="updateFailureCount">
       <![CDATA[
           UPDATE
               cmm_user
           SET
               FAILURE_CNT = FAILURE_CNT + 1
           WHERE
               user_email = #{ loginId}
       ]]>
	</update>

	<select id="checkFailureCount" resultType="Integer">
       <![CDATA[
           SELECT
               FAILURE_CNT
           FROM
               cmm_user
           WHERE
               user_email=#{ loginId}
       ]]>
	</select>
	
	<select id="userCount" resultType="Integer">
       <![CDATA[
           SELECT
               count(user_email) count
           FROM
               cmm_user
           WHERE
               user_email=#{ loginId}
       ]]>
	</select>	
</mapper>